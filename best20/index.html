<!DOCTYPE html>
<html>
  <!-- 
    ã€æº–å‚™ã€‘
      ãƒ»ãƒãƒ¼ãƒ åã‚’team.jsã«å…¥åŠ›
    ã€æ“ä½œæ–¹æ³•ã€‘
      ãƒ»Shiftã‚­ãƒ¼ + å·¦ã‚¯ãƒªãƒƒã‚¯ : å¯¾æˆ¦ä¸­ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
      ãƒ»å·¦ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯       : å‹ã¡ä¸ŠãŒã‚Š&ãƒã‚¤ãƒ©ã‚¤ãƒˆè§£é™¤
      ãƒ»å³ã‚¯ãƒªãƒƒã‚¯            ï¼šå‹ã¡ä¸ŠãŒã‚Šè§£é™¤&ãƒã‚¤ãƒ©ã‚¤ãƒˆè§£é™¤
  -->
<head>
  <meta charset="UTF-8">
  <title>TournamentBest20</title>
  <link rel="stylesheet" href="https://use.typekit.net/kmm5cat.css">
  <script>
    (function(d) {
      var config = {
        kitId: 'afz4kci',
        scriptTimeout: 3000,
        async: true
      },
      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
    })(document);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
  <style>
    :root {
      /* è‰²ãƒ»é€æ˜åº¦ã®ä¸€æ‹¬ç®¡ç† */
      --neon-color: #E5E4E2;       /* åˆæœŸçŠ¶æ…‹ */
      --neon-color-win: #32FFD2;   /* å‹åˆ©æ™‚ */
      --core-color: #ffffff;      /* ç·šã®èŠ¯ã®è‰²ï¼ˆç™½æ¨å¥¨ï¼‰ */
      --default-zabuton: #ffffff;    /* é€šå¸¸æ™‚ã®çŸ©å½¢å¡—ã‚Šã¤ã¶ã—è‰² */
      --default-text: #000000;    /* é€šå¸¸æ™‚ã®æ–‡å­—è‰² */
      --transparent: transparent;   /* é€æ˜ */
    }
    body{ 
      user-select: none;
      margin: 0;
      overflow: scroll;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    ::-webkit-scrollbar { display: none;}

    /* ä¸Šã«é‡ã­ã‚‹è¨­å®š */
    #mySVG {
      position: relative;
      z-index: 10;
      display: block;
      width: 100vw;
      height: 100vh;
    }

    text {
      font-weight: bold;           /*é€šå¸¸ */
      stroke: var(--default-zabuton);  /*ãƒ†ã‚­ã‚¹ãƒˆã®ç¸å–ã‚Šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰²ã« */
      stroke-width: 5.0px;         /*ç¸å–ã‚Šã®å¤ªã•ï¼ˆé©å®œèª¿æ•´ã—ã¦ãã ã•ã„ï¼‰ */
      paint-order: stroke;         /*ç¸å–ã‚Šã‚’æ–‡å­—ã®ä¸‹ã«é…ç½®ã—ã¦èª­ã¿ã‚„ã™ãã™ã‚‹ */
      pointer-events: none;       /* ã‚¯ãƒªãƒƒã‚¯ä¸å¯ */
      fill: var(--default-text);  /* ãƒ†ã‚­ã‚¹ãƒˆè‰²ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ©ãƒ¼ã« */
      font-family: "ff-din-paneuropean", "noto-sans-cjk-jp", sans-serif;/*ãƒ•ã‚©ãƒ³ãƒˆæŒ‡å®š */
      dominant-baseline: central; /*ã‚’å‰Šé™¤ã™ã‚‹ã‹ã€tspanå´ã§åˆ¶å¾¡ã™ã‚‹ */
      text-anchor: middle;
    }
    
    /* ãƒã‚ªãƒ³å‡¦ç†ã®ã‚¯ãƒ©ã‚¹ */
    .neon {
      stroke: var(--core-color) !important;
      transition: 0.3s;
    }

    use {
      fill: none;
      stroke: none;
    }

    /* åˆæœŸãƒã‚ªãƒ³ */
    use[href^="#rect"].neon { 
      fill: var(--default-zabuton);
      filter: url(#neon-glow-rect) !important; 
      stroke: var(--neon-color) !important; 
      stroke-width: 5px;
    }
    use[href^="#path"].neon { 
      filter: url(#neon-glow-path) !important; 
      stroke: var(--neon-color) !important; 
      stroke-width: 6px;
    }
    /* å‹åˆ©æ™‚ãƒã‚ªãƒ³ */
    .win-neon {
        filter: url(#neon-glow-win) !important;
        stroke: var(--neon-color-win) !important;
        stroke-width: 6px !important;
        transition: 0.3s;
    }
    /*å¯¾æˆ¦ä¸­ãƒã‚ªãƒ³ */
    .match-neon {
        fill: var(--default-zabuton);
        filter: url(#neon-glow-win) !important;
        stroke: var(--neon-color-win) !important;
        stroke-width: 6px !important;
        transition: 0.3s;
    }

    /* é€æ˜åŒ–ç”¨ã‚¯ãƒ©ã‚¹ */
    .hide {
      fill: var(--transparent) !important;
      stroke: var(--transparent) !important;
    }
    /* ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªè¦ç´ ã®ã‚«ãƒ¼ã‚½ãƒ« */
    .clickable-rect {
      cursor: pointer;
      pointer-events: all; 
    }

    /* æ“ä½œèª¬æ˜ãƒ‘ãƒãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .instruction-panel {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 15px 30px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      pointer-events: none;
      z-index: 100;
      text-align: center;
    }
    .instruction-panel h4 {
      margin: 0 0 8px 0;
      font-size: 16px;
      letter-spacing: 1px;
    }
    .instruction-panel p {
      margin: 0;
      font-size: 14px;
      line-height: 1.6;
      white-space: nowrap;
    }
    /* ç®¡ç†ç”»é¢ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .admin-modal {
      display: none;
      flex-direction: column; /* ç¸¦ã«ä¸¦ã¹ã‚‹ */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      max-height: 80vh; /* ç”»é¢ã®8å‰²ã¾ã§ã«åˆ¶é™ */
      background: #222;
      color: #fff;
      border: 1px solid #444;
      z-index: 2000;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      border-radius: 12px;
      overflow: hidden;
      overflow-y: auto;
    }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .admin-header {
      padding: 18px 20px;
      background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
      border-bottom: 1px solid #444;
      font-size: 18px;
      font-weight: 800;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    /* ğŸ› ã®éƒ¨åˆ†ã ã‘ã«å°‘ã—å…‰å½©ã‚’ã¤ã‘ã‚‹éš ã—å‘³ */
    .admin-header::before {
      content: "ğŸ› ";
      filter: drop-shadow(0 0 5px rgba(193, 166, 255, 0.6));
    }

    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .admin-body {
      padding: 20px;
      flex: 1;
    }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    .admin-footer {
      padding: 12px 20px;
      background: #2a2a2a;
      border-top: 1px solid #444;
      display: flex;
      justify-content: flex-end; /* å³å¯„ã› */
    }

    /* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */
    .close-btn {
      padding: 8px 25px;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }
    .close-btn:hover {
      background: #666;
    }

    .admin-modal.active { display: block; }
    .admin-modal h2 { margin-top: 0; font-size: 18px; border-bottom: 1px solid #555; }
    .admin-modal .field { margin-bottom: 15px; }
    .admin-modal label { display: block; font-size: 12px; margin-bottom: 5px; color: #aaa; }
    .admin-modal input[type="file"] { font-size: 12px; }
    .admin-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    .admin-overlay.active { display: block; }
    .instruction-box {
    background: rgba(255, 255, 255, 0.1); /* ã‚ãšã‹ã«èƒŒæ™¯ã‚’æ˜ã‚‹ã */
    border: 1px solid #555;
    border-radius: 4px;
    padding: 12px;
    margin-bottom: 20px;
    text-align: left;
  }

  .instruction-box ul {
    list-style-type: disc;
  }

  .instruction-box li span {
    font-weight: bold;
  }

  /* --- ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚†ã£ãã‚Šè¡¨ç¤ºã•ã›ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ --- */
    @keyframes fadeInWin {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    .fade-in-text {
      animation: fadeInWin 1.5s ease-out forwards; /* 1.5ç§’ã‹ã‘ã¦è¡¨ç¤º */
    }
  </style>
</head>
<body>
  <!--èƒŒæ™¯ç”¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«-->
  <div id="particle-bg" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -100; display: none; background-color: #000;"></div>
  
  <svg id="mySVG" width="1920" height="1080" viewBox="0 0 1920 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="square paper" style="display: none;">
      <defs>
        <pattern id="square" width="10" height="10" patternUnits="userSpaceOnUse" >
          <rect width="10" height="10" style="fill:none;stroke:#999;stroke-width:1px"/>
        </pattern>
        <pattern id="quad" width="100" height="100" patternUnits="userSpaceOnUse" >
          <rect width="100" height="100" style="stroke:#000;stroke-width:2px" fill="url(#square)"/>
        </pattern>
      </defs>
      <rect width=100% height=100% fill="url(#quad)" style="stroke:#000;stroke-width:2px"/>
    </g>
    <defs>
      <path id="path_0_top" d="M 150 25 L 275 25 L 275 50" stroke-width="5" />
      <path id="path_0_bot" d="M 150 125 L 275 125 L 275 100" stroke-width="5" />
      <path id="path_1_top" d="M 150 25 L 200 25 L 200 65" stroke-width="5" />
      <path id="path_1_bot" d="M 150 155 L 200 155 L 200 115" stroke-width="5" />
      <path id="path_2_top" d="M 150 25 L 180 25 L 180 125" stroke-width="5" />
      <path id="path_2_bot" d="M 150 285 L 180 285 L 180 185" stroke-width="5" />
      <path id="path_3_top" d="M 190 30 L 240 30 L 240 260" stroke-width="5" />
      <path id="path_3_bot" d="M 190 550 L 240 550 L 240 320" stroke-width="5" />
      <path id="path_4_top" d="M 190 30 L 310 30 L 310 -90" stroke-width="5" />
      <rect id="rect_0_top" x="0" y="0" width="150" height="50" />
      <rect id="rect_0_bot" x="0" y="100" width="150" height="50" />
      <rect id="rect_1_top" x="0" y="0" width="150" height="50" />
      <rect id="rect_1_bot" x="0" y="130" width="150" height="50" />
      <rect id="rect_2_top" x="0" y="0" width="150" height="50" />
      <rect id="rect_2_bot" x="0" y="260" width="150" height="50" />
      <rect id="rect_3_top" x="0" y="0" width="190" height="60" />
      <rect id="rect_3_bot" x="0" y="520" width="190" height="60" />
      <rect id="rect_4_top" x="0" y="0" width="190" height="60" />
      <rect id="rect_5_top" x="0" y="0" width="360" height="90" />
    </defs>
    
    <defs>
      <filter id="neon-glow-rect" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="small-blur" />
        <feGaussianBlur in="SourceAlpha" stdDeviation="10" result="large-blur" />
        <feFlood flood-color="var(--neon-color)" result="color" />
        <feComposite in="color" in2="small-blur" operator="in" result="neon-core" />
        <feComposite in="color" in2="large-blur" operator="in" result="neon-halo" />
        <feMerge>
          <feMergeNode in="neon-halo" /> <feMergeNode in="neon-core" /> <feMergeNode in="neon-core" /> <feMergeNode in="neon-core" /> <feMergeNode in="SourceGraphic" /> </feMerge>
      </filter>

      <filter id="neon-glow-path" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="5" result="wide-blur" />
        <feGaussianBlur in="SourceAlpha" stdDeviation="1.5" result="tight-blur" />
        <feFlood flood-color="var(--neon-color)" result="neon-flood" />
        <feComposite in="neon-flood" in2="wide-blur" operator="in" result="neon-halo" />
        <feComposite in="neon-flood" in2="tight-blur" operator="in" result="neon-thick-line" />
        <feMerge>
          <feMergeNode in="neon-halo" />       <feMergeNode in="neon-thick-line" /> <feMergeNode in="neon-thick-line" /> <feMergeNode in="SourceGraphic" />    </feMerge>
      </filter>
      
      <filter id="neon-glow-win" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur" />
        <feFlood flood-color="var(--neon-color-win)" result="color" />
        <feComposite in="color" in2="blur" operator="in" result="glow" />
        <feMerge>
          <feMergeNode in="glow" /><feMergeNode in="glow" /><feMergeNode in="SourceGraphic" /></feMerge>
      </filter>
      
    </defs>
    
    <g transform="translate(100, 10)" id="match_0_1" data-next="match_1_1" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_2">
      <use id="path0_1" href="#path_0_top" fill="none" stroke="white" />
      <use id="rect0_1" href="#rect_0_top" fill="white" class="clickable-rect" />
      <text id="text0_1" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(100, 10)" id="match_0_2" data-next="match_1_1" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_1">
      <use id="path0_2" href="#path_0_bot" fill="none" stroke="white" />
      <use id="rect0_2" href="#rect_0_bot" fill="white" class="clickable-rect" />
      <text id="text0_2" font-size="25" x="75" y="125" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(100, 920)" id="match_0_15" data-next="match_1_8" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_16">
      <use id="path0_15" href="#path_0_top" fill="none" stroke="white" />
      <use id="rect0_15" href="#rect_0_top" fill="white" class="clickable-rect" />
      <text id="text0_15" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(100, 920)" id="match_0_16" data-next="match_1_8" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_15">
      <use id="path0_16" href="#path_0_bot" fill="none" stroke="white" />
      <use id="rect0_16" href="#rect_0_bot" fill="white" class="clickable-rect" />
      <text id="text0_16" font-size="25" x="75" y="125" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1670, 10)" id="match_0_17" data-next="match_1_9" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_18">
      <use id="path0_17" href="#path_0_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect0_17" href="#rect_0_top" fill="white" class="clickable-rect" />
      <text id="text0_17" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1670, 10)" id="match_0_18" data-next="match_1_9" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_17">
      <use id="path0_18" href="#path_0_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect0_18" href="#rect_0_bot" fill="white" class="clickable-rect" />
      <text id="text0_18" font-size="25" x="75" y="125" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>

    <g transform="translate(1670, 920)" id="match_0_31" data-next="match_1_16" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_32">
      <use id="path0_31" href="#path_0_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect0_31" href="#rect_0_top" fill="white" class="clickable-rect" />
      <text id="text0_31" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1670, 920)" id="match_0_32" data-next="match_1_16" data-prev-top="none" data-prev-bottom="none" data-opponent="match_0_31">
      <use id="path0_32" href="#path_0_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect0_32" href="#rect_0_bot" fill="white" class="clickable-rect" />
      <text id="text0_32" font-size="25" x="75" y="125" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>

    <g transform="translate(300, 60)" id="match_1_1" data-next="match_2_1" data-prev-top="match_0_1" data-prev-bottom="match_0_2" data-opponent="match_1_2">
      <use id="path1_1" href="#path_1_top" fill="none" stroke="white" />
      <use id="rect1_1" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_1" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(300, 60)" id="match_1_2" data-next="match_2_1" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_1">
      <use id="path1_2" href="#path_1_bot" fill="none" stroke="white" />
      <use id="rect1_2" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_2" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(300, 320)" id="match_1_3" data-next="match_2_2" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_4">
      <use id="path1_3" href="#path_1_top" fill="none" stroke="white" />
      <use id="rect1_3" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_3" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(300, 320)" id="match_1_4" data-next="match_2_2" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_3">
      <use id="path1_4" href="#path_1_bot" fill="none" stroke="white" />
      <use id="rect1_4" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_4" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(300, 580)" id="match_1_5" data-next="match_2_3" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_6">
      <use id="path1_5" href="#path_1_top" fill="none" stroke="white" />
      <use id="rect1_5" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_5" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>   
    <g transform="translate(300, 580)" id="match_1_6" data-next="match_2_3" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_5">
      <use id="path1_6" href="#path_1_bot" fill="none" stroke="white" />
      <use id="rect1_6" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_6" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(300, 840)" id="match_1_7" data-next="match_2_4" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_8">
      <use id="path1_7" href="#path_1_top" fill="none" stroke="white" />
      <use id="rect1_7" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_7" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(300, 840)" id="match_1_8" data-next="match_2_4" data-prev-top="match_0_15" data-prev-bottom="match_0_16" data-opponent="match_1_7">
      <use id="path1_8" href="#path_1_bot" fill="none" stroke="white" />
      <use id="rect1_8" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_8" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1470, 60)" id="match_1_9" data-next="match_2_5" data-prev-top="match_0_17" data-prev-bottom="match_0_18" data-opponent="match_1_10">
      <use id="path1_9" href="#path_1_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_9" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_9" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1470, 60)" id="match_1_10" data-next="match_2_5" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_9">
      <use id="path1_10" href="#path_1_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_10" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_10" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1470, 320)" id="match_1_11" data-next="match_2_6" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_12">
      <use id="path1_11" href="#path_1_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_11" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_11" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1470, 320)" id="match_1_12" data-next="match_2_6" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_11">
      <use id="path1_12" href="#path_1_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_12" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_12" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1470, 580)" id="match_1_13" data-next="match_2_7" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_14">
      <use id="path1_13" href="#path_1_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_13" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_13" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>   
    <g transform="translate(1470, 580)" id="match_1_14" data-next="match_2_7" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_13">
      <use id="path1_14" href="#path_1_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_14" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_14" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1470, 840)" id="match_1_15" data-next="match_2_8" data-prev-top="none" data-prev-bottom="none" data-opponent="match_1_16">
      <use id="path1_15" href="#path_1_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_15" href="#rect_1_top" fill="white" class="clickable-rect" />
      <text id="text1_15" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25" class="initial-text"></text>
    </g>
    <g transform="translate(1470, 840)" id="match_1_16" data-next="match_2_8" data-prev-top="match_0_31" data-prev-bottom="match_0_32" data-opponent="match_1_15">
      <use id="path1_16" href="#path_1_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect1_16" href="#rect_1_bot" fill="white" class="clickable-rect" />
      <text id="text1_16" font-size="25" x="75" y="155" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>

    <g transform="translate(420, 125)" id="match_2_1" data-next="match_3_1" data-prev-top="match_1_1" data-prev-bottom="match_1_2" data-opponent="match_2_2">
      <use id="path2_1" href="#path_2_top" fill="none" stroke="white" />
      <use id="rect2_1" href="#rect_2_top" fill="white" class="clickable-rect" />
      <text id="text2_1" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(420, 125)" id="match_2_2" data-next="match_3_1" data-prev-top="match_1_3" data-prev-bottom="match_1_4" data-opponent="match_2_1">
      <use id="path2_2" href="#path_2_bot" fill="none" stroke="white" />
      <use id="rect2_2" href="#rect_2_bot" fill="white" class="clickable-rect" />
      <text id="text2_2" font-size="25" x="75" y="285" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(420, 645)" id="match_2_3" data-next="match_3_2" data-prev-top="match_1_5" data-prev-bottom="match_1_6" data-opponent="match_2_4">
      <use id="path2_3" href="#path_2_top" fill="none" stroke="white" />
      <use id="rect2_3" href="#rect_2_top" fill="white" class="clickable-rect" />
      <text id="text2_3" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(420, 645)" id="match_2_4" data-next="match_3_2" data-prev-top="match_1_7" data-prev-bottom="match_1_8" data-opponent="match_2_3">
      <use id="path2_4" href="#path_2_bot" fill="none" stroke="white" />
      <use id="rect2_4" href="#rect_2_bot" fill="white" class="clickable-rect" />
      <text id="text2_4" font-size="25" x="75" y="285" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1350, 125)" id="match_2_5" data-next="match_3_3" data-prev-top="match_1_9" data-prev-bottom="match_1_10" data-opponent="match_2_6">
      <use id="path2_5" href="#path_2_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect2_5" href="#rect_2_top" fill="white" class="clickable-rect" />
      <text id="text2_5" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1350, 125)" id="match_2_6" data-next="match_3_3" data-prev-top="match_1_11" data-prev-bottom="match_1_12" data-opponent="match_2_5">
      <use id="path2_6" href="#path_2_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect2_6" href="#rect_2_bot" fill="white" class="clickable-rect" />
      <text id="text2_6" font-size="25" x="75" y="285" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1350, 645)" id="match_2_7" data-next="match_3_4" data-prev-top="match_1_13" data-prev-bottom="match_1_14" data-opponent="match_2_8">
      <use id="path2_7" href="#path_2_top" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect2_7" href="#rect_2_top" fill="white" class="clickable-rect" />
      <text id="text2_7" font-size="25" x="75" y="25" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>
    <g transform="translate(1350, 645)" id="match_2_8" data-next="match_3_4" data-prev-top="match_1_15" data-prev-bottom="match_1_16" data-opponent="match_2_7">
      <use id="path2_8" href="#path_2_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-150" />
      <use id="rect2_8" href="#rect_2_bot" fill="white" class="clickable-rect" />
      <text id="text2_8" font-size="25" x="75" y="285" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="75 25"></text>
    </g>

    <g transform="translate(505, 250)" id="match_3_1" data-next="match_4_1" data-prev-top="match_2_1" data-prev-bottom="match_2_2" data-opponent="match_3_2">
      <use id="path3_1" href="#path_3_top" fill="none" stroke="white" />
      <use id="rect3_1" href="#rect_3_top" fill="white" class="clickable-rect" />
      <text id="text3_1" font-size="25"  x="95" y="30" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>
    <g transform="translate(505, 250)" id="match_3_2" data-next="match_4_1" data-prev-top="match_2_3" data-prev-bottom="match_2_4" data-opponent="match_3_1">
      <use id="path3_2" href="#path_3_bot" fill="none" stroke="white" />
      <use id="rect3_2" href="#rect_3_bot" fill="white" class="clickable-rect" />
      <text id="text3_2" font-size="25"  x="95" y="550" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>
    <g transform="translate(1225, 250)" id="match_3_3" data-next="match_4_2" data-prev-top="match_2_5" data-prev-bottom="match_2_6" data-opponent="match_3_4">
      <use id="path3_3" href="#path_3_top" fill="none" stroke="white" transform="scale(-1,1)" x="-190" />
      <use id="rect3_3" href="#rect_3_top" fill="white" class="clickable-rect" />
      <text id="text3_3" font-size="25"  x="95" y="30" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>
    <g transform="translate(1225, 250)" id="match_3_4" data-next="match_4_2" data-prev-top="match_2_7" data-prev-bottom="match_2_8" data-opponent="match_3_3">
      <use id="path3_4" href="#path_3_bot" fill="none" stroke="white" transform="scale(-1,1)" x="-190" />
      <use id="rect3_4" href="#rect_3_bot" fill="white" class="clickable-rect" />
      <text id="text3_4" font-size="25"  x="95" y="550" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>

    <g transform="translate(650, 510)" id="match_4_1" data-next="match_5_1" data-prev-top="match_3_1" data-prev-bottom="match_3_2" data-opponent="match_4_2">
      <use id="path4_1" href="#path_4_top" fill="none" stroke="white" />
      <use id="rect4_1" href="#rect_4_top" fill="white" class="clickable-rect" />
      <text id="text4_1" font-size="25" x="95" y="30" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>
    <g transform="translate(1080, 510)" id="match_4_2" data-next="match_5_1" data-prev-top="match_3_3" data-prev-bottom="match_3_4" data-opponent="match_4_1">
      <use id="path4_2" href="#path_4_top" fill="none" stroke="white" transform="scale(-1,1)" x="-190" />
      <use id="rect4_2" href="#rect_4_top" fill="white" class="clickable-rect" />
      <text id="text4_2" font-size="25" x="95" y="30" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="95 30"></text>
    </g>
    
    <g transform="translate(780, 330)" id="match_5_1" data-next="none" data-prev-top="match_4_1" data-prev-bottom="match_4_2" data-opponent="none">
      <use id="rect5_1" href="#rect_5_top" fill="white" class="clickable-rect" />
      <text id="text5_1" font-size="40" x="180" y="45" fill="black" stroke="white" text-anchor="middle" dominant-baseline="middle" transform-origin="180 45"></text>
    </g>
    <g id="watermark" style="pointer-events: none; opacity: 0.15;">
      <defs>
        <linearGradient id="wmGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:white; stop-opacity:1" />
          <stop offset="100%" style="stop-color:gray; stop-opacity:1" />
        </linearGradient>
      </defs>
      <text x="50%" y="50%" 
            font-size="280" 
            font-weight="900"
            fill="url(#wmGradient)"
            stroke="white"
            stroke-width="2"
            text-anchor="middle" 
            dominant-baseline="middle" 
            transform="rotate(-25, 960, 540)" 
            style="letter-spacing: 0.1em; mix-blend-mode: overlay;">
        SAMPLE
      </text>
    </g>
  </svg>

  <div id="adminOverlay" class="admin-overlay active"></div>
  <div id="adminModal" class="admin-modal active">
    <div class="admin-header">ç®¡ç†ãƒ‘ãƒãƒ«</div>
    <div class="admin-body">
      <div class="instruction-box">
        <h4 style="margin: 0 0 8px 0; color: #fff; font-size: 14px;">ã€åŸºæœ¬æ“ä½œã€‘</h4>
        <ul style="margin: 0; padding-left: 18px; font-size: 12px; color: #eee; line-height: 1.6;">
          <li><span style="color: #ffeb3b;">Shift + å·¦ã‚¯ãƒªãƒƒã‚¯</span> : å¯¾æˆ¦ä¸­ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰</li>
          <li><span style="color: #ffeb3b;">å·¦ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</span> : å‹ã¡ä¸ŠãŒã‚Š ï¼† ãƒã‚¤ãƒ©ã‚¤ãƒˆè§£é™¤</li>
          <li><span style="color: #ffeb3b;">å³ã‚¯ãƒªãƒƒã‚¯</span> : å‹ã¡ä¸ŠãŒã‚Šè§£é™¤ ï¼† ãƒã‚¤ãƒ©ã‚¤ãƒˆè§£é™¤</li>
          <li><span style="color: #ffeb3b;">Mãƒœã‚¿ãƒ³</span> : ç®¡ç†ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º</li>
        </ul>
      </div>

      <div class="field">
        <label>ãƒãƒ¼ãƒ åCSVã‚’èª­ã¿è¾¼ã¿</label>
        <input type="file" id="csvInput" accept=".csv">
      </div>
      <div class="field">
        <p style="font-size: 11px; color: #ccc;">
          â€»CSVå½¢å¼: ID, ãƒãƒ¼ãƒ å<br>
          ä¾‹: text0_1, ãƒãƒ¼ãƒ A<br>
          æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã¨ã—ã¦<code>&lt;br&gt;</code> ã‚¿ã‚°ãŒä½¿ç”¨å¯èƒ½
        </p>
      </div>
      <div class="field" style="margin-top: 10px; padding-top: 5px;">
        <label style="display: flex; align-items: center; cursor: pointer;">
          <input type="checkbox" id="hideToggle" style="margin-right: 10px; width: 18px; height: 18px;">
          å‹åˆ©ãƒãƒ¼ãƒ ã‚’ä¸‹ã«æ®‹ã•ãªã„
        </label>
      </div>
      <div class="field" style="margin-top: 20px; border-top: 1px solid #555; padding-top: 15px;">
        <label style="display: flex; align-items: center; cursor: pointer;">
          <input type="checkbox" id="particleToggle" style="margin-right: 10px; width: 18px; height: 18px;">
          èƒŒæ™¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’è¡¨ç¤º
        </label>
      </div>
      <div class="field" style="margin-top: 10px; padding-top: 5px;">
        <label style="display: flex; align-items: center; cursor: pointer;">
          <input type="checkbox" id="gridToggle" style="margin-right: 10px; width: 18px; height: 18px;">
          åº§æ¨™ç¢ºèªç”¨ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆF12ã¨ä½µç”¨ï¼‰
        </label>
      </div>
      <div class="field" style="margin-top: 20px; border-top: 1px solid #555; padding-top: 15px;">
        <label>é€ã‹ã—è§£é™¤ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
        <input type="password" id="pwInput" placeholder="Password..." 
               style="width: 100%; padding: 5px; background: #333; color: #fff; border: 1px solid #555;">
        <button onclick="checkPassword()" style="margin-top: 8px; cursor: pointer;">è§£é™¤</button>
        <p id="pwMsg" style="font-size: 11px; color: #ff5252; margin-top: 5px;"></p>
      </div>
    </div>
    <div class="admin-footer">
      <button class="close-btn" onclick="toggleAdmin()">é–‰ã˜ã‚‹</button>
    </div>
  </div>
  <script src="initialTeam.js"></script>
  <script>
    // åˆæœŸå€¤åŠã³ã‚µã‚¤ã‚¸ãƒ³ã‚°ã‚’å®Ÿè¡Œ ---
    document.querySelectorAll('.initial-text').forEach(el => {
      const keyName = el.id.replace('text', 'team') ;
      const teamName = TEAM_DATA[keyName] || "æœªå…¥åŠ›";
      adjustFontSize(el, teamName, 140);
    });
 
    //ãƒ†ã‚­ã‚¹ãƒˆãŒæŒ‡å®šã—ãŸå¹…(maxWidth)ã«åã¾ã‚‹ã¾ã§ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’ä¸‹ã’ã‚‹
    function adjustFontSize(el, name, maxWidth) {
      // 1. è¦ªã‚°ãƒ«ãƒ¼ãƒ—ã‹ã‚‰å¯¾å¿œã™ã‚‹çŸ©å½¢è¦ç´ (useè¦ç´ )ã‚’æ¢ã™
      const group = el.closest('g');
      const useRect = group ? group.querySelector('use[href^="#rect"]') : null;
  
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®æº–å‚™ï¼ˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
      let rectWidth = maxWidth || 130;
      let rectHeight = 50;

      // 2. æ ï¼ˆçŸ©å½¢ï¼‰ã®ã‚µã‚¤ã‚ºã‚’å‹•çš„ã«å–å¾—
      if (useRect) {
        const href = useRect.getAttribute('href');
        if (href) {
          const rectId = href.substring(1);
          const originRect = document.getElementById(rectId);

          if (originRect) {
            // SVGã®å±æ€§å€¤ã‚’å–å¾—ã—ã¦æ•°å€¤åŒ–
            rectWidth = parseFloat(originRect.getAttribute('width')) || rectWidth;
            rectHeight = parseFloat(originRect.getAttribute('height')) || rectHeight;
          }
        }
      }

      // 3. ä½™ç™½ï¼ˆãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ã®è¨­å®š
      // çŸ©å½¢ã‚µã‚¤ã‚ºã«å¯¾ã—ã¦æ¨ª90%ã€ç¸¦85%ã‚’ä¸Šé™ã¨ã™ã‚‹ï¼ˆã‹ã¤ã‹ã¤ã«ãªã‚‰ãªã„ã‚ˆã†ã«ï¼‰
      const safeMaxWidth = rectWidth * 0.9;
      const safeMaxHeight = rectHeight * 0.85;

      // 4. åˆæœŸãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®è¨­å®š
      // æ±ºå‹æ (text5)ã¯å¤§ããã€ãã‚Œä»¥å¤–ã¯æ¨™æº–ã‚µã‚¤ã‚ºã‹ã‚‰é–‹å§‹
      let fontSize = el.id.includes('text5') ? 40 : 25;
      const lines = name.split('<br>');
  
      el.style.fontSize = fontSize + "px";
      el.textContent = '';

      // 5. <tspan>è¦ç´ ã®ä½œæˆã¨é…ç½®
      lines.forEach((line, index) => {
        const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
        tspan.textContent = line.trim();
        tspan.setAttribute("x", el.getAttribute("x")); // è¦ªã®Xåº§æ¨™ã‚’ç¶™æ‰¿

        if (index === 0) {
          if (lines.length > 1) {
            // è¤‡æ•°è¡Œï¼šå…¨ä½“ã®ä¸­å¤®ã‚’å‡ºã™ãŸã‚ã€1è¡Œç›®ã‚’(è¡Œæ•°ã«å¿œã˜ã¦)ä¸Šã«ãšã‚‰ã™
            tspan.setAttribute("dy", `-${(lines.length - 1) * 0.6}em`);
          } else {
            // 1è¡Œï¼šdominant-baseline: central ã¨ã®çµ„ã¿åˆã‚ã›ã§ä¸­å¤®ã«ãã‚‹å€¤
            tspan.setAttribute("dy", "-0.2em");
          }
        } else {
          // 2è¡Œç›®ä»¥é™ã®è¡Œé–“ï¼ˆ1.0em = 1æ–‡å­—åˆ†ï¼‰
          tspan.setAttribute("dy", "1.0em");
        }
        el.appendChild(tspan);
      });
      


      // 6. ã‚µã‚¤ã‚ºèª¿æ•´ãƒ«ãƒ¼ãƒ—
      // æ¨ªå¹…ï¼ˆwidthï¼‰ã¾ãŸã¯é«˜ã•ï¼ˆheightï¼‰ãŒå®‰å…¨åœã‚’è¶…ãˆã‚‹é–“ã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’ä¸‹ã’ã‚‹
      try {
        while (fontSize > 8) { // æœ€å°ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’8pxã«è¨­å®š
          const bbox = el.getBBox();
          // å¹…ã¨é«˜ã•ã®ä¸¡æ–¹ãŒåã¾ã£ãŸã‚‰ãƒ«ãƒ¼ãƒ—çµ‚äº†
          if (bbox.width <= safeMaxWidth && bbox.height <= safeMaxHeight) {
            break;
          }
          fontSize -= 0.5; // 0.5pxåˆ»ã¿ã§ç²¾å¯†ã«èª¿æ•´
          el.style.fontSize = fontSize + "px";
        }
      } catch (e) {
        // getBBoxã¯è¦ç´ ãŒéè¡¨ç¤ºã ã¨ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹ã“ã¨ãŒã‚ã‚‹ãŸã‚
        console.warn("BBoxã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:", e);
      }
    }

    //è‰²ã®å®šç¾©
    const NEON = 'neon';
    const MATCH_NEON = 'match-neon';
    const WIN_NEON = 'win-neon';
    const HIDE = 'hide';
    
    // åˆæœŸçŠ¶æ…‹ï¼šã™ã¹ã¦ã®è¦ç´ ã‚’ãƒã‚ªãƒ³ã«
    document.querySelectorAll('use[href^="#rect"], use[href^="#path"]').forEach(el => {
        el.classList.add(NEON); 
    });

    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’è¿½åŠ 
    // å…¨ã¦ã®ã‚¯ãƒªãƒƒã‚¯ç”¨è¦ç´ ï¼ˆclickable-rectï¼‰ã‚’å–å¾—ã—ã¦ãƒ«ãƒ¼ãƒ—å‡¦ç†
    document.querySelectorAll('.clickable-rect').forEach(rect => {
        const group = rect.closest('g'); // è¦ªã® <g> è¦ç´ ã‚’å–å¾—
            
        // 1. å·¦ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ï¼šå‹ã¡ä¸ŠãŒã‚Š
        rect.addEventListener('dblclick', () => {
          const nextGroup = document.getElementById(group.dataset.next); 
          const opponentGroup = document.getElementById(group.dataset.opponent);
          if (!nextGroup) return; //å‹ã¡ä¸ŠãŒã‚ŠãŒç„¡ã‘ã‚Œã°å‡¦ç†ã‚’ãƒ‘ã‚¹ã™ã‚‹ã€‚

          const myPath = group.querySelector('use[id^="path"]');
          const myText = group.querySelector('text');
          const nextText = nextGroup.querySelector('text');
          const opponentPath = opponentGroup.querySelector('use[id^="path"]');
          const opponentText = opponentGroup.querySelector('text');
          
          let rawText = "";
          const tspans = myText.querySelectorAll('tspan');
          if (tspans.length > 0) {
            rawText = Array.from(tspans).map(t => t.textContent).join('<br>');// ã™ã§ã«æ”¹è¡Œã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ <br> ã§ç¹‹ãç›´ã™
          } else {
            rawText = myText.textContent;
          }

          // 1. ä¸€æ—¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ï¼ˆé€£ç¶šæ“ä½œç”¨ï¼‰
          nextText.classList.remove('fade-in-text');
          myText.classList.remove('fade-in-text');

          // 2. åå‰ã®æµã—è¾¼ã¿ã¨ã‚µã‚¤ã‚ºèª¿æ•´ã‚’å®Ÿè¡Œ
          let nextMaxWidth = nextText.id.includes('text5') ? 340 : (nextText.id.includes('text4') || nextText.id.includes('text3')) ? 170 : 130;
          adjustFontSize(nextText, rawText, nextMaxWidth);
          // 3. 1ãƒ•ãƒ¬ãƒ¼ãƒ å¾…ã£ã¦ã‹ã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã—ã¦ã€Œã‚†ã£ãã‚Šè¡¨ç¤ºã€ã‚’é–‹å§‹
          requestAnimationFrame(() => {
            nextText.classList.add('fade-in-text');
          });
          // 4. è‡ªåˆ†ã®ãƒ‘ã‚¹ã‚’ãƒã‚¼ãƒ³ã‚¿ã«ã€ç›¸æ‰‹ã‚’æ¶ˆç¯ï¼ˆã¾ãŸã¯åˆæœŸè‰²ï¼‰
          if(myPath) {
              myPath.classList.remove(NEON);
              myPath.classList.add(WIN_NEON);
          }
          if (opponentPath) {
              opponentPath.classList.remove(WIN_NEON);
              opponentPath.classList.add(NEON);
          }

          /* ãƒ†ã‚­ã‚¹ãƒˆé€æ˜åŒ–å‡¦ç† */
          if(isHideMode){
            myText.classList.add(HIDE); //è‡ªèº«ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’é€æ˜åŒ–ã€‚
            opponentText.classList.remove(HIDE);//ç›¸æ‰‹ã®ãƒ†ã‚­ã‚¹ãƒˆé€æ˜åŒ–ã‚’è§£é™¤ã€‚
          }
          
          // å…¨ã¦ã®å‹åˆ©ãƒã‚ªãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒã‚ªãƒ³è§£é™¤ï¼‰
          document.querySelectorAll('use[href^="#rect"].' + MATCH_NEON).forEach(el => el.classList.remove(MATCH_NEON));
          document.querySelectorAll('use[href^="#rect"]').forEach(el => el.classList.add(NEON));
        
          //å‹ã¡ä¸ŠãŒã‚Šç·šã®æç”»é †ã®å¤‰æ›´
          if (opponentGroup) {opponentGroup.after(group);}
        });
      
        // 2. å³ã‚¯ãƒªãƒƒã‚¯ï¼šå‹ã¡ä¸ŠãŒã‚Šè§£é™¤
        rect.addEventListener('contextmenu', (e) => {
          e.preventDefault(); //å³ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‡ºãªã„ã‚ˆã†ã«ã™ã‚‹
          const prevTop = document.getElementById(group.dataset.prevTop);
          const prevBottom = document.getElementById(group.dataset.prevBottom);
          
          // å‰ã®è©¦åˆã®ãƒ‘ã‚¹ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’å®‰å…¨ã«ãƒªã‚»ãƒƒãƒˆ
          [prevTop, prevBottom].forEach(prev => {
            if (prev) {
              const p = prev.querySelector('use[href^="#path"]');
              const t = prev.querySelector('text');
              if (p) {
                p.classList.remove(WIN_NEON)
                p.classList.add(NEON);
              }  //ï¼‘ã¤å‰ã®ãƒ‘ã‚¹ã®ãƒã‚ªãƒ³ã‚’æ¶ˆã™
              if (t) t.classList.remove(HIDE);  //ï¼‘ã¤å‰ã®ãƒ†ã‚­ã‚¹ãƒˆé€æ˜åŒ–ã‚’è§£é™¤ã€‚
              group.querySelector('text').textContent = ""; //è‡ªèº«ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å‰Šé™¤
            }
          });

          // å…¨ã¦ã®å‹åˆ©ãƒã‚ªãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒã‚ªãƒ³è§£é™¤ï¼‰
          document.querySelectorAll('use[href^="#rect"].' + MATCH_NEON).forEach(el => el.classList.remove(MATCH_NEON));
          document.querySelectorAll('use[href^="#rect"]').forEach(el => el.classList.add(NEON));

        });
        // 3. Shift + å·¦ã‚¯ãƒªãƒƒã‚¯ï¼šå¯¾æˆ¦ä¸­ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        rect.addEventListener('click', (e) => {
            if (e.shiftKey) {
              // å…¨ã¦ã®å‹åˆ©ãƒã‚ªãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒã‚ªãƒ³è§£é™¤ï¼‰
              document.querySelectorAll('use[href^="#rect"].' + MATCH_NEON).forEach(el => el.classList.remove(MATCH_NEON));
              document.querySelectorAll('use[href^="#rect"]').forEach(el => el.classList.add(NEON));
              
              //ãƒã‚ªãƒ³å‡¦ç†
              const myRect = group.querySelector('use[id^="rect"]');
              const opponentRect = document.getElementById(group.dataset.opponent);
              if (myRect){
                myRect.classList.remove(NEON);
                myRect.classList.add(MATCH_NEON);
              } 
              if (opponentRect) {
                opponentRect.querySelector('use[id^="rect"]').classList.remove(NEON)
                opponentRect.querySelector('use[id^="rect"]').classList.add(MATCH_NEON);
              } 
            }
        });   
    });
    // --- ç®¡ç†ç”»é¢ã®åˆ¶å¾¡ ---
    function toggleAdmin() {
      document.getElementById('adminModal').classList.toggle('active');
      document.getElementById('adminOverlay').classList.toggle('active');
    }

    let isHideMode = false; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å®Ÿè¡Œã—ãªã„ï¼ˆOFFï¼‰
    
    // "M" ã‚­ãƒ¼ã§ç®¡ç†ç”»é¢ã‚’é–‹ã
    window.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'm') toggleAdmin();
      if (e.key === 'Escape') {
        document.getElementById('adminModal').classList.remove('active');
        document.getElementById('adminOverlay').classList.remove('active');
      }
    });

    // --- CSVèª­ã¿è¾¼ã¿å‡¦ç† ---
    document.getElementById('csvInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(event) {
        const text = event.target.result;
        parseCSV(text);
      };
      reader.readAsText(file);
    });

    function parseCSV(data) {
      const lines = data.split(/\r\n|\n/);
      lines.forEach(line => {
        const [id, name] = line.split(',');
        if (id && name) {
          // ãƒ—ãƒ¬é ­æ–‡å­—ï¼ˆtextï¼‰ãŒã¤ã„ã¦ã„ãªã„å ´åˆã‚’è€ƒæ…®ã—ã¦è£œå®Œ
          const targetId = id.startsWith('text') ? id : 'text' + id;
          const textEl = document.getElementById(targetId);
          if (textEl) {
            let maxWidth = textEl.id.includes('text5') ? 340 : (textEl.id.includes('text4') || textEl.id.includes('text3')) ? 170 : 130;
            adjustFontSize(textEl, name.trim(), maxWidth);
          }
        }
      });
      console.log("CSV loaded and applied.");
    }
    // æ–¹çœ¼ç´™ã¨åº§æ¨™ãƒ­ã‚°ã®çµ±åˆç®¡ç†
    document.getElementById('gridToggle').addEventListener('change', function(e) {
      const grid = document.getElementById('square paper');
      const isChecked = e.target.checked;

      if (isChecked) {
        grid.style.display = 'block';   // æ–¹çœ¼ç´™ã‚’è¡¨ç¤º
        document.getElementById('mySVG').style.width = 'auto';
        document.getElementById('mySVG').style.height = 'auto';
        console.log("ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ¢ãƒ¼ãƒ‰: ON (ã‚¯ãƒªãƒƒã‚¯åº§æ¨™ã®è¡¨ç¤ºã‚’é–‹å§‹)");
      } else {
        grid.style.display = 'none';    // æ–¹çœ¼ç´™ã‚’éè¡¨ç¤º
        document.getElementById('mySVG').style.width = '100vw';
        document.getElementById('mySVG').style.height = '100vh';
        console.log("ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ¢ãƒ¼ãƒ‰: OFF");
      }
    });
    // å‹ã¡ä¸ŠãŒã‚Šæ™‚ã®å‡¦ç†ãƒãƒ¼ãƒ ã®å‹ã¡ä¸ŠãŒã‚Šï¼ˆæ–‡å­—ã‚’æ¶ˆã™ï¼‰ã®ç®¡ç†
    document.getElementById('hideToggle').addEventListener('change', function(e) {
      const isChecked = e.target.checked;
      if (isChecked) {
        isHideMode = true; // å‹ã¡ä¸ŠãŒã‚Š
      } else {
        isHideMode = false; // å‹ã¡æ®‹ã‚Š
      }
    });

    // --- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«èƒŒæ™¯ã®åˆ¶å¾¡ ---
    let particlesInitiated = false;

    document.getElementById('particleToggle').addEventListener('change', async function(e) {
      const container = document.getElementById('particle-bg');

      if (e.target.checked) {
        container.style.display = 'block';
    
        if (!particlesInitiated) {
          await tsParticles.load("particle-bg", {
            background: { color: "#000" },
            fpsLimit: 60,
            // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒã‚¦ã‚¹é€£å‹•ï¼‰ã‚’ã™ã¹ã¦ã‚ªãƒ•
            interactivity: {
              events: {
                onHover: { enable: false },
                onClick: { enable: false },
              }
            },
            particles: {
              color: { value: "#E5E4E2" }, // ãƒã‚ªãƒ³ã‚«ãƒ©ãƒ¼
              links: {
                color: "#E5E4E2",
                distance: 150,
                enable: true,    // ç·šã§ç¹‹ã
                opacity: 0.3,
                width: 1,
              },
              move: {
                enable: true,
                speed: 0.8,      // å°‘ã—ã‚†ã£ãã‚Šã‚ã«è¨­å®š
                direction: "none",
                outModes: { default: "out" },
              },
              number: {
                value: 70,       // ç²’å­ã®æ•°
                density: { enable: true, area: 800 },
              },
              size: { value: { min: 1, max: 3 } },
              opacity: { value: 0.5 }
            },
            detectRetina: true,
          });
          particlesInitiated = true;
        } else {
          const p = tsParticles.domItem(0);
          if (p) p.play();
        }
      } else {
        container.style.display = 'none';
        const p = tsParticles.domItem(0);
        if (p) p.pause();
      }
    });

    // ãƒã‚¦ã‚¹åº§æ¨™ã®å–å¾—å‡¦ç†ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’è¦‹ã¦åˆ¤æ–­ï¼‰
    const svgElement = document.getElementById('mySVG');
    svgElement.addEventListener('click', (event) => {
      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹æ™‚ã ã‘å®Ÿè¡Œ
      const isGridActive = document.getElementById('gridToggle').checked;
  
      if (isGridActive) {
        const x = event.offsetX;
        const y = event.offsetY;
        console.log(`ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸåº§æ¨™: (${x}, ${y})`);
      }
    });
    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è§£é™¤ãƒ­ã‚¸ãƒƒã‚¯
    function checkPassword() {
      const pw = document.getElementById('pwInput').value;
      const watermark = document.getElementById('watermark');
      const msg = document.getElementById('pwMsg');
      
      // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ 'urbanjungle' ã«è¨­å®šã—ãŸå ´åˆ
      if (pw === 'urbanjungle') {
        watermark.style.display = 'none';
        msg.style.color = '#46ff52';
        msg.textContent = "é€ã‹ã—ã‚’è§£é™¤ã—ã¾ã—ãŸã€‚";
        // 5ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
        setTimeout(() => { msg.textContent = ""; }, 5000);
      } else {
        msg.style.color = '#ff5252';
        msg.textContent = "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚";
      }
    }
  </script>
</body>
</html>